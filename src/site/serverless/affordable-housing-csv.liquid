---
title: Data â€” Affordable Housing Results Summary
permalink:
  serverless: "/housing/affordable-housing/csv"
---

{%- assign query = eleventy.serverless.query -%}
{%- assign housingdb = housing.housingList | filterByQuery: query -%}
{%- assign numFiltersApplied = query | numFiltersApplied -%}
{%- assign numResults = housingdb | size -%}
{%- assign nl = newline -%}

Apartment Name,Link,Address,City,Waitlist Status,Unit Types,Rent,Min Income,Max Income,Phone Number,Must be Senior,Timestamp (America/Los_Angeles)
{%- assign sortedHousingdb = housingdb | sort: "aptName" -%}
    {%- for apartment in sortedHousingdb -%}
    {{ newline }}
"{{ apartment.aptName -}}","https://theunitedeffort.org/housing/affordable-housing/{{-apartment.id-}}","{{- apartment.address -}}","{{- apartment.city -}}","
          {%- assign waitlistStatuses = apartment.units | map: "openStatus" | compact | uniq -%}
          {%- if waitlistStatuses.size > 1 -%}
            {%- if waitlistStatuses contains "Available" -%}
              Partially Available
            {%- elsif waitlistStatuses contains "Waitlist Open" -%}
              Partially Open
            {%- else -%}
              Varies
            {%- endif -%}
          {%- elsif waitlistStatuses.size > 0 -%}
            {{- waitlistStatuses | first -}}
          {%- endif -%}","{{- apartment.units | map: "type" | uniq | rankSort | join: "\n" | replace: "Bedroom", "BR" -}}","
          {%- assign rents = apartment.units | map: "rent" | map: "amount" | compact | uniq | sort -%}
          {%- if rents.size == 1 -%}
            {{- rents | first | money -}}
          {%- elsif rents.size >= 2 -%}
            {{- rents | first | money }} - {{ rents | last | money -}}
          {%- endif -%}","
          {%- assign minIncomes = apartment.units | map: "minIncome" | map: "amount" | compact | uniq | sort -%}
          {%- if minIncomes.size == 1 -%}
            {{- minIncomes | first | money -}}
          {%- elsif minIncomes.size >= 2 -%}
            {{- minIncomes | first | money }} - {{ minIncomes | last | money -}}
          {%- endif -%}","
          {%- assign maxIncomes = apartment.units | map: "maxIncome" -%}
          {%- assign maxIncomeLows = maxIncomes | map: "low" | compact | uniq | sort -%}
          {%- assign maxIncomeHighs = maxIncomes | map: "high" | compact | uniq | sort -%}
          {%- assign percentAmis = apartment.units | map: "incomeBracket" | compact | uniq | sort -%}
          {%- if maxIncomeLows.size > 0 and maxIncomeHighs.size > 0 -%}
            {%- assign maxIncomeLow = maxIncomeLows | first -%}
            {%- assign maxIncomeHigh = maxIncomeHighs | last -%}
            {%- if maxIncomeLow == maxIncomeHigh -%}
              {{- maxIncomeLow | money -}}
            {%- else -%}
              {{- maxIncomeLow | money }} - {{ maxIncomeHigh | money -}}
            {%- endif -%}
          {%- elsif percentAmis.size > 0 -%}
            {%- if percentAmis.size == 1 -%}
              {{- percentAmis | first -}}% AMI
            {%- elsif percentAmis.size >= 2 -%}
              {{- percentAmis | first }}% - {{ percentAmis | last -}}% AMI
            {%- endif -%}
          {%- endif -%}","
        {{- apartment.phone -}}","
          {%- if apartment.populationsServed contains "Seniors" -%}
            Yes{%- if apartment.minAge > 0 -%}, {{- apartment.minAge -}}+{%- endif -%}
          {%- else -%}
            No
          {%- endif -%}","{{ "now" | date: "%m/%d/%Y %H:%M", "America/Los_Angeles" }}"
    {%- endfor -%}